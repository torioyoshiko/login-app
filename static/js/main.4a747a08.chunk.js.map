{"version":3,"sources":["reducers/user.reducer.js","reducers/index.js","reducers/todos.reducer.js","utils/firebaseApp.js","components/RegisterPage.js","actions/todos.actions.js","components/list.js","components/LoginPage.js","actions/user.action.js","providers/userProvider.js","App.js","middleware/todoPersistor.js","index.js"],"names":["user","state","loaded","action","type","payload","combineReducers","todos","newState","concat","filter","todo","index","firebase","apiKey","authDomain","databaseURL","projectId","appId","RegisterPage","useState","email","setEmail","password","setPassword","history","useHistory","registerUser","a","auth","setPersistence","Auth","Persistence","LOCAL","firebaseApp","createUserWithEmailAndPassword","push","process","className","placeholder","onChange","e","target","value","onClick","setTodos","connect","props","setTodo","db","firestore","getInfo","todoList","collection","doc","uid","get","exists","dispatch","data","useEffect","signOut","currentUser","input","addToTodos","map","key","removeTodo","onRemoveTodo","LoginPage","loginUser","signInWithEmailAndPassword","setUser","onAuthStateChanged","newUser","App","exact","path","component","List","store","createStore","rootReducer","applyMiddleware","next","result","console","log","getState","set","saveTodosToDb","undefined","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4a747a08.chunk.js","sourcesContent":["const user = (state = {user: null, loaded: false}, action) => {\r\n    switch (action.type) {\r\n        case \"SET_USER\":\r\n            return  {user: action.payload, loaded: true};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default user;","import { combineReducers } from 'redux'\r\nimport {todos} from \"./todos.reducer\";\r\nimport user from \"./user.reducer\";\r\n\r\nexport default combineReducers({user: user, todos: todos})","export const todos = (state = [], action) => {\r\n    switch (action.type) {\r\n        case \"ADD_TODO\":\r\n            const newState = state.concat(action.payload)\r\n            return newState;\r\n        case \"REMOVE_TODO\":\r\n            return state.filter((todo, index)=> {\r\n                return index !== action.payload\r\n            });\r\n        case \"SET_TODOS\":\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}","import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDkIyLvI4sNmZKm227djMHBMDqKVZ7RQuI\",\r\n    authDomain: \"login-app-85261.firebaseapp.com\",\r\n    databaseURL: \"https://login-app-85261.firebaseio.com\",\r\n    projectId: \"login-app-85261\",\r\n    appId: \"1:267875740811:web:1655fb669f08686b22788e\",\r\n};\r\n\r\nexport default firebase.initializeApp(firebaseConfig);\r\n\r\n","import React, {useState} from 'react';\r\nimport './css/RegisterPage.css';\r\nimport firebaseApp from \"../utils/firebaseApp\";\r\nimport firebase from \"firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst RegisterPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const history = useHistory();\r\n\r\n    const registerUser = async () => {\r\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n        await firebaseApp.auth().createUserWithEmailAndPassword(email, password);\r\n        history.push(process.env.PUBLIC_URL + \"/list\");\r\n    }\r\n\r\n    const login = () => {\r\n        history.push(process.env.PUBLIC_URL + \"/login\")\r\n    }\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='main'>\r\n                <p className='text'>Welcome</p>\r\n                <input placeholder='Email' onChange={(e) => setEmail(e.target.value)} className='input-form'/>\r\n                <input placeholder='Password' type=\"password\" onChange={(e) => setPassword(e.target.value)}\r\n                       className='input-form'/>\r\n                <button className='button' onClick={registerUser}>Sign Up</button>\r\n                <div className='login-block'>\r\n                    <p className='login-text'>Already with us?</p>\r\n                    <a className='link' onClick={login}>&nbsp; Log In</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RegisterPage;\r\n","export const addTodo = (newTodo) => {\r\n    return {\r\n        type: \"ADD_TODO\",\r\n        payload: newTodo\r\n    }\r\n}\r\n\r\nexport const removeTodo = (index) => {\r\n    return {\r\n        type: \"REMOVE_TODO\",\r\n        payload: index\r\n    }\r\n}\r\n\r\nexport const setTodos = (todos) => {\r\n    return {\r\n        type: \"SET_TODOS\",\r\n        payload: todos\r\n    }\r\n}","import './css/list.css'\r\nimport React, {useEffect, useState} from 'react';\r\nimport firebase from \"../utils/firebaseApp\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport {addTodo, removeTodo, setTodos} from '../actions/todos.actions';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {todos: state.todos, user: state.user}\r\n}\r\n\r\nconst List = (props) => {\r\n    const history = useHistory();\r\n    const [todo, setTodo] = useState('');\r\n    const db = firebase.firestore();\r\n\r\n    const getInfo = async () => {\r\n        if (props.user.user) {\r\n            const todoList = db.collection(\"userTodos\").doc(props.user.user.uid);\r\n            const doc = await todoList.get()\r\n            if (doc.exists) {\r\n                props.dispatch(setTodos(doc.data().todos))\r\n            } else {\r\n                props.dispatch(setTodos([]))\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getInfo();\r\n    }, [props.user])\r\n\r\n    if (props.user.loaded === false) {\r\n        return null\r\n    }\r\n\r\n    if (!props.user.user) {\r\n        history.push(process.env.PUBLIC_URL + '/')\r\n        return null;\r\n    }\r\n\r\n    const signOut = async() => {\r\n        await firebase.auth().signOut()\r\n    }\r\n\r\n    const onTodoChange = (input) => {\r\n        setTodo(input);\r\n    }\r\n\r\n    const addToTodos = (todo) => {\r\n        props.dispatch(addTodo(todo))\r\n    }\r\n\r\n    const onRemoveTodo = (index) => {\r\n        props.dispatch(removeTodo(index))\r\n    }\r\n\r\n    return (\r\n        <div className='main-list'>\r\n            <div className='profile-info'>\r\n                <p className='text-profile'>Logged in as {firebase.auth().currentUser.email}</p>\r\n                <p className='text-profile'>{props.state}</p>\r\n                <button className='button-profile' onClick={signOut}>Sign Out</button>\r\n            </div>\r\n            <div className='write-task'>\r\n                <input\r\n                    onChange={(e) => onTodoChange(e.target.value)}\r\n                    className='list-input'\r\n                    placeholder='Write your task here'\r\n                    value={todo}\r\n                />\r\n                <button onClick={() => addToTodos(todo)} className='create-button first'>Create</button>\r\n            </div>\r\n            <div className='list'>\r\n                <p className='main-word'>Tasks:</p>\r\n                {props.todos.map((todo, index) =>\r\n                    <div key={index} className='single-task'>\r\n                        <p className='task'>{todo}</p>\r\n                        <button onClick={() => onRemoveTodo(index)} className='list-button'>✓</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(mapStateToProps)(List);\r\n","import React, {useState} from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport firebaseApp from \"../utils/firebaseApp\";\r\nimport firebase from \"firebase\";\r\n\r\nconst LoginPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const history = useHistory();\r\n\r\n    const loginUser = async () => {\r\n        await firebaseApp.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n        await firebaseApp.auth().signInWithEmailAndPassword(email, password);\r\n        history.push(process.env.PUBLIC_URL + \"/list\");\r\n    }\r\n\r\n    const newUser = () => {\r\n        history.push(process.env.PUBLIC_URL + \"/\")\r\n    }\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='main'>\r\n                <p className='text'>Welcome back</p>\r\n                <input placeholder='Email' onChange={(e) => setEmail(e.target.value)} className='input-form'/>\r\n                <input placeholder='Password' type=\"password\" onChange={(e) => setPassword(e.target.value)}\r\n                       className='input-form'/>\r\n                <button className='button' onClick={loginUser}>Log In</button>\r\n                <div className='login-block'>\r\n                    <p className='login-text'>New user?</p>\r\n                    <a className='link' onClick={newUser}>&nbsp;Sign Up</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginPage;\r\n","export const setUser = (user) => {\r\n    return {\r\n        type: \"SET_USER\",\r\n        payload: user\r\n    }\r\n}","import {useEffect} from 'react';\r\nimport firebase from \"../utils/firebaseApp\";\r\nimport {setUser} from \"../actions/user.action\";\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {user: state.user}\r\n}\r\n\r\nconst UserProvider = (props) => {\r\n    useEffect(() => firebase.auth().onAuthStateChanged(async (newUser) => {\r\n        props.dispatch(setUser(firebase.auth().currentUser))\r\n    }), [])\r\n\r\n    return null;\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserProvider)\r\n","import React from 'react';\nimport './App.css';\nimport RegisterPage from \"./components/RegisterPage\";\nimport {Route, Switch} from 'react-router-dom';\nimport List from \"./components/list\";\nimport LoginPage from \"./components/LoginPage\";\nimport UserProvider from \"./providers/userProvider\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <Switch>\n            <Route exact path={process.env.PUBLIC_URL + '/'} component={RegisterPage}/>\n            <Route path={process.env.PUBLIC_URL + '/list'} component={List}/>\n            <Route path={process.env.PUBLIC_URL + '/login'} component={LoginPage}/>\n        </Switch>\n        <UserProvider/>\n    </div>\n  );\n}\n\nexport default (App);\n","import firebase from \"../utils/firebaseApp\";\r\nconst db = firebase.firestore();\r\n\r\n\r\nconst saveTodosToDb = (store, todos) => {\r\n    console.log(store.getState().user.user.uid)\r\n    db.collection(\"userTodos\").doc(store.getState().user.user.uid).set({\r\n        todos: todos\r\n    })\r\n}\r\n\r\nexport const todoPersistor = store => next => action => {\r\n    let result = next(action);\r\n\r\n    if(action.type === 'ADD_TODO' || action.type === 'REMOVE_TODO') {\r\n        console.log(store.getState())\r\n        saveTodosToDb(store, store.getState().todos)\r\n    }\r\n\r\n    return result;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport {  createStore, applyMiddleware } from 'redux'\nimport rootReducer from \"./reducers/index\";\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport {todoPersistor} from './middleware/todoPersistor'\n\nconst store = createStore(rootReducer, applyMiddleware(todoPersistor), undefined);\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <BrowserRouter>\n                <App/>\n            </BrowserRouter>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}